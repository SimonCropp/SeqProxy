<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!-- begin-snippet: StructuredLogInclude -->
    <script src="https://cdn.jsdelivr.net/npm/structured-log@0.2.0/dist/structured-log.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/structured-log-seq-sink@0.4.1/dist/structured-log-seq-sink.js" type="text/javascript"></script>
    <!-- end-snippet -->
    <script>
        // begin-snippet: StructuredLogConfig

        var levelSwitch = new structuredLog.DynamicLevelSwitch("info");
        const log = structuredLog.configure()
            .writeTo(new structuredLog.ConsoleSink())
            .minLevel(levelSwitch)
            .writeTo(SeqSink({
                url: "http://localhost:5341",
                compact: true,
                levelSwitch: levelSwitch
            }))
            .create();

        // end-snippet
        // begin-snippet: StructuredLog
        function LogStructured() {
            const textInput = document.getElementById("textInput").value;
            log.info('StructuredLog input: {Text}', textInput);
        }

        // end-snippet
        // begin-snippet: LogRawJs
        function LogRawJs() {
            const textInput = document.getElementById("textInput").value;
            const postSettings = {
                method: 'POST',
                credentials: 'include',
                mode: 'cors',
                body: `{'@mt':'RawJs input: {Text}','Text':'${textInput}'}`
            };

            return fetch('/api/events/raw', postSettings);
        }
                    // end-snippet

/**/</script>
</head>
<body>
    Message: <input type="text" id="textInput" value="Some text" /><br />
    <button onclick="LogRawJs()">Log message with raw JS</button>
    <button onclick="LogStructured()">Log message with raw JS</button>
</body>
</html>